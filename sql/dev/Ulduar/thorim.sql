-- ##########################################################
-- Thorim
-- ##########################################################
-- Thorim
UPDATE `creature_template` SET `speed_walk` = 1.66667, `mechanic_immune_mask` = 650854239, `flags_extra` = 1, `ScriptName` = 'boss_thorim' WHERE `entry` = 32865;
UPDATE `creature_template` SET `speed_walk` = 1.66667, `baseattacktime` = 1500, `equipment_id` = 1844, `mechanic_immune_mask` = 650854239 WHERE `entry` = 33147;
DELETE FROM `creature` WHERE `id`=32865;
INSERT INTO `creature` (`id`,`map`,`spawnMask`,`phaseMask`,`modelid`,`equipment_id`,`position_x`,`position_y`,`position_z`,`orientation`,`spawntimesecs`,`spawndist`,`currentwaypoint`,`curhealth`,`curmana`,`MovementType`) VALUES
(32865, 603, 3, 1, 28977, 0, 2134.967, -298.962, 438.331, 1.57, 604800, 0, 0, 4183500, 425800, 0);
DELETE FROM `spell_linked_spell` WHERE `spell_trigger`=62042;
INSERT INTO `spell_linked_spell` (`spell_trigger`, `spell_effect`, `type`, `comment`) VALUES
('62042','62470','1','Thorim: Deafening Thunder');

/*-- Charge Orb
DELETE FROM conditions WHERE SourceEntry = 62016;
INSERT INTO `conditions` VALUES
('13','0','62016','0','0','29','0','33378','1','0','0','0','',NULL);*/
UPDATE `creature_template` SET `unit_flags` = 33685508 WHERE `entry` = 33378;

-- Gate
DELETE FROM `gameobject_scripts` WHERE `id`=55194;
INSERT INTO `gameobject_scripts` (`id`, `delay`, `command`, `datalong`, `datalong2`, `dataint`, `x`, `y`, `z`, `o`) VALUES 
(55194, 0, 11, 34155, 15, '0', 0, 0, 0, 0);
DELETE FROM `gameobject_template` WHERE `entry`=194265;
INSERT INTO `gameobject_template` (`entry`, `type`, `displayId`, `name`, `IconName`, `castBarCaption`, `unk1`, `faction`, `flags`, `size`, `questItem1`, `questItem2`, `questItem3`, `questItem4`, `questItem5`, `questItem6`, `data0`, `data1`, `data2`, `data3`, `data4`, `data5`, `data6`, `data7`, `data8`, `data9`, `data10`, `data11`, `data12`, `data13`, `data14`, `data15`, `data16`, `data17`, `data18`, `data19`, `data20`, `data21`, `data22`, `data23`, `ScriptName`, `WDBVerified`) VALUES
('194265','1','295','Lever','','','','35','48','3','0','0','0','0','0','0','0','0','6000','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','','0');
UPDATE `gameobject` SET `id` = 194265, `rotation2` = 1, `rotation3` = 0, `spawntimesecs` = 7200, `animprogress` = 100 WHERE `guid` = 55194;

-- Cleanup
DELETE FROM `creature` WHERE `id` IN (32885, 32883, 32908, 32907, 32882, 33110, 32886, 32879, 32892, 33140, 33141, 33378, 32874, 32875)
OR guid IN (136694, 136695, 136666, 136706, 136754, 136653, 136756, 136757, 136725, 136718);
INSERT INTO `creature` VALUES
('136433','32874','603','3','1','26065','0','2217.69','-337.394','412.177','1.23918','604800','0','0','26066','0','0','0','0','0'),
('136434','32874','603','3','1','26065','0','2218.38','-297.505','412.176','1.02974','604800','0','0','26066','0','0','0','0','0'),
('137583','32874','603','3','1','0','626','2235.26','-338.345','412.134','1.58979','604800','0','0','26066','0','0','0','0','0'),
('137584','32874','603','3','1','0','626','2235.07','-297.985','412.134','1.61336','604800','0','0','26066','0','0','0','0','0'),
('136435','32875','603','3','1','26239','0','2198.05','-428.769','419.985','6.05629','604800','0','0','32582','0','0','0','0','0'),
('136436','32875','603','3','1','26239','0','2220.31','-436.22','412.26','1.06465','604800','0','0','32582','0','0','0','0','0'),
('136446','32879','603','3','1','16925','0','2134.77','-262.307','428.694','1.3439','604800','0','0','12600','0','0','0','0','0'),
('136447','32879','603','3','1','16925','0','2134.77','-262.422','420.071','1.51844','604800','0','0','12600','0','0','0','0','0'),
('136448','32879','603','3','1','16925','0','2134.57','-262.726','420.076','0.471239','604800','0','0','12600','0','0','0','0','0'),
('136449','32879','603','3','1','16925','0','2134.79','-262.813','420.089','0.750492','604800','0','0','12600','0','0','0','0','0'),
('136450','32879','603','3','1','16925','0','2134.83','-263.023','420.085','1.43117','604800','0','0','12600','0','0','0','0','0'),
('136451','32879','603','3','1','16925','0','2101.2','-434.135','438.331','6.19592','604800','0','0','12600','0','0','0','0','0'),
('136452','32879','603','3','1','16925','0','2100.41','-446.712','438.331','6.07375','604800','0','0','12600','0','0','0','0','0'),
('137587','32882','603','3','1','0','0','2149.68','-263.477','419.679','3.12102','604800','0','0','269620','0','0','0','0','0'),
('136471','32885','603','3','1','21311','0','2127.24','-251.309','419.793','5.89921','604800','0','0','138600','3994','0','0','0','0'),
('136472','32885','603','3','1','21308','0','2120.1','-258.99','419.764','6.24828','604800','0','0','138600','3994','0','0','0','0'),
('136473','32885','603','3','1','21311','0','2123.32','-254.771','419.789','6.17846','604800','0','0','138600','3994','0','0','0','0'),
('136490','32886','603','3','1','25990','0','2129.09','-277.142','419.756','1.22173','604800','0','0','67405','4169','0','0','0','0'),
('136491','32892','603','3','1','16925','0','2115.44','-291.286','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136492','32892','603','3','1','16925','0','2102.78','-214.428','438.953','5.28835','604800','0','0','12600','0','0','0','0','0'),
('136493','32892','603','3','1','16925','0','2106','-300.483','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136494','32892','603','3','1','16925','0','2088.37','-296.082','438.873','0.645772','604800','0','0','12600','0','0','0','0','0'),
('136495','32892','603','3','1','16925','0','2077.9','-275','438.961','0.226893','604800','0','0','12600','0','0','0','0','0'),
('136496','32892','603','3','1','16925','0','2142.44','-286.225','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136497','32892','603','3','1','16925','0','2154.84','-291.861','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136498','32892','603','3','1','16925','0','2086.08','-231.106','438.972','5.70723','604800','0','0','12600','0','0','0','0','0'),
('136499','32892','603','3','1','16925','0','2139.67','-298.94','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136500','32892','603','3','1','16925','0','2121.38','-304.514','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136501','32892','603','3','1','16925','0','2147.5','-304.214','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136502','32892','603','3','1','16925','0','2192.01','-257.326','438.971','3.22886','604800','0','0','12600','0','0','0','0','0'),
('136503','32892','603','3','1','16925','0','2165.58','-214.592','439.18','4.13643','604800','0','0','12600','0','0','0','0','0'),
('136504','32892','603','3','1','16925','0','2128.64','-286.653','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136505','32892','603','3','1','16925','0','2077.97','-252.064','438.926','6.0912','604800','0','0','12600','0','0','0','0','0'),
('136506','32892','603','3','1','16925','0','2189.34','-279.229','438.901','2.86234','604800','0','0','12600','0','0','0','0','0'),
('136507','32892','603','3','1','16925','0','2164.06','-299.804','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136508','32892','603','3','1','16925','0','2182.12','-296.245','438.941','2.3911','604800','0','0','12600','0','0','0','0','0'),
('136509','32892','603','3','1','16925','0','2185.99','-236.63','438.993','3.61283','604800','0','0','12600','0','0','0','0','0'),
('136510','32892','603','3','1','16925','0','2130.08','-298.506','438.331','0','604800','0','0','12600','0','0','0','0','0'),
('136511','32892','603','3','1','16925','0','2134.89','-297.546','438.331','1.5708','604800','0','0','12600','0','0','0','0','0'),
('136512','32892','603','3','1','16925','0','2117.64','-280.122','419.566','3.64774','604800','0','0','12600','0','0','0','0','0'),
('136513','32892','603','3','1','16925','0','2110.79','-262.786','419.57','0.750492','604800','0','0','12600','0','0','0','0','0'),
('136514','32892','603','3','1','16925','0','2119.8','-242.009','419.539','3.14159','604800','0','0','12600','0','0','0','0','0'),
('136515','32892','603','3','1','16925','0','2148.72','-280.108','419.614','3.80482','604800','0','0','12600','0','0','0','0','0'),
('136516','32892','603','3','1','16925','0','2159.62','-262.984','419.552','1.09956','604800','0','0','12600','0','0','0','0','0'),
('136517','32892','603','3','1','16925','0','2149.38','-243.578','419.568','5.48033','604800','0','0','12600','0','0','0','0','0'),
('136518','32892','603','3','1','16925','0','2138.47','-244.316','419.598','6.11798','604800','0','0','12600','0','0','0','0','0'),
('136555','32908','603','3','1','21308','0','2131.31','-259.182','419.974','5.91667','604800','0','0','189000','3994','0','0','0','0'),
('136274','33110','603','3','1','25990','0','2198.29','-436.92','419.985','0.261799','604800','0','0','26962','4169','0','0','0','0'),
('137585','33110','603','3','1','0','0','2227.58','-308.303','412.134','1.59372','604800','0','0','26962','4169','0','0','0','0'),
('137586','33110','603','3','1','0','0','2227.47','-345.375','412.134','1.56622','604800','0','0','26962','4169','0','0','0','0'),
('136455','33140','603','3','1','16925','0','2246.44','-303.921','412.26','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136456','33140','603','3','1','16925','0','2246.07','-316.321','412.176','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136457','33140','603','3','1','16925','0','2246.73','-330.487','412.235','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136458','33140','603','3','1','16925','0','2245.42','-371.886','412.18','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136459','33140','603','3','1','16925','0','2235.05','-382.899','412.176','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136460','33140','603','3','1','16925','0','2243.33','-342.863','412.191','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136461','33140','603','3','1','16925','0','2257.03','-318.814','412.188','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136462','33140','603','3','1','16925','0','2235.88','-300.696','412.181','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136463','33140','603','3','1','16925','0','2235.89','-314.715','412.176','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136464','33140','603','3','1','16925','0','2235.2','-271.878','412.26','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136465','33140','603','3','1','16925','0','2235.43','-288.356','412.26','3.97935','604800','0','0','12600','0','0','0','0','0'),
('136466','33140','603','3','1','16925','0','2235.09','-257.913','412.26','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136467','33140','603','3','1','16925','0','2235.56','-330.224','412.176','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136468','33140','603','3','1','16925','0','2235.18','-359.7','412.198','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136469','33140','603','3','1','16925','0','2234.95','-371.578','412.176','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136470','33140','603','3','1','16925','0','2235.58','-345.99','412.26','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136474','33141','603','3','1','16925','0','2209.5','-330.169','412.223','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136475','33141','603','3','1','16925','0','2209.25','-304.223','412.259','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136476','33141','603','3','1','16925','0','2209.32','-371.843','412.187','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136477','33141','603','3','1','16925','0','2209.53','-316.533','412.176','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136478','33141','603','3','1','16925','0','2221.08','-383.234','412.176','0.087266','604800','0','0','12600','0','0','0','0','0'),
('136479','33141','603','3','1','16925','0','2221.37','-371.528','412.176','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136480','33141','603','3','1','16925','0','2207.64','-344.097','412.291','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136481','33141','603','3','1','16925','0','2197.86','-318.733','412.024','5.67232','604800','0','0','12600','0','0','0','0','0'),
('136482','33141','603','3','1','16925','0','2222.06','-258.049','412.26','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136483','33141','603','3','1','16925','0','2221.59','-273.257','412.26','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136484','33141','603','3','1','16925','0','2221.88','-288.476','412.26','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136485','33141','603','3','1','16925','0','2221.76','-300.566','412.176','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136486','33141','603','3','1','16925','0','2221.65','-315.113','412.176','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136487','33141','603','3','1','16925','0','2221.64','-329.363','412.176','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136488','33141','603','3','1','16925','0','2221.27','-345.712','412.26','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136489','33141','603','3','1','16925','0','2221.22','-359.47','412.176','3.54302','604800','0','0','12600','0','0','0','0','0'),
('136407','33378','603','3','1','16925','0','2164.19','-290.799','420.229','0.785398','604800','0','0','12600','0','0','0','0','0'),
('136408','33378','603','3','1','16925','0','2163.98','-235.03','420.452','0.785398','604800','0','0','12600','0','0','0','0','0'),
('136409','33378','603','3','1','16925','0','2104.99','-233.484','433.573','5.49779','604800','0','0','12600','0','0','0','0','0'),
('136410','33378','603','3','1','16925','0','2092.64','-262.594','433.576','6.26573','604800','0','0','12600','0','0','0','0','0'),
('136411','33378','603','3','1','16925','0','2104.76','-292.719','433.181','0.785398','604800','0','0','12600','0','0','0','0','0'),
('136412','33378','603','3','1','16925','0','2146.09','-223.438','420.229','0.785398','604800','0','0','12600','0','0','0','0','0'),
('136413','33378','603','3','1','16925','0','2106.3','-233.556','420.218','0.785398','604800','0','0','12600','0','0','0','0','0'),
('136414','33378','603','3','1','16925','0','2094.53','-262.935','420.229','6.26573','604800','0','0','12600','0','0','0','0','0'),
('136415','33378','603','3','1','16925','0','2124.67','-223.332','420.229','0.785398','604800','0','0','12600','0','0','0','0','0'),
('136416','33378','603','3','1','16925','0','2164.97','-293.375','433.526','2.35619','604800','0','0','12600','0','0','0','0','0'),
('136417','33378','603','3','1','16925','0','2164.58','-233.333','433.892','3.90954','604800','0','0','12600','0','0','0','0','0'),
('136418','33378','603','3','1','16925','0','2145.8','-222.196','433.293','4.45059','604800','0','0','12600','0','0','0','0','0'),
('136419','33378','603','3','1','16925','0','2123.91','-222.443','433.375','4.97419','604800','0','0','12600','0','0','0','0','0'),
('136420','33378','603','3','1','16925','0','2106.36','-291.455','420.229','0.785398','604800','0','0','12600','0','0','0','0','0');


-- Pre adds
UPDATE `creature_template` SET `equipment_id` = 1849, `ScriptName` = 'npc_thorim_pre_phase' WHERE `entry` = 32885;
UPDATE `creature_template` SET `equipment_id` = 1849 WHERE `entry` = 33153;
UPDATE `creature_template` SET `ScriptName` = 'npc_thorim_pre_phase' WHERE `entry` = 32883;
UPDATE `creature_template` SET `equipment_id` = 1847 WHERE `entry` = 33152;
UPDATE `creature_template` SET `equipment_id` = 1850, `ScriptName` = 'npc_thorim_pre_phase' WHERE `entry` = 32908;
UPDATE `creature_template` SET `equipment_id` = 1850 WHERE `entry` = 33151;
UPDATE `creature_template` SET `ScriptName` = 'npc_thorim_pre_phase' WHERE `entry` = 32907;
UPDATE `creature_template` SET `equipment_id` = 1852 WHERE `entry` = 33150;
UPDATE `creature_template` SET `ScriptName` = 'npc_thorim_pre_phase' WHERE `entry` = 32882;
UPDATE `creature_template` SET `ScriptName` = 'npc_thorim_pre_phase' WHERE `entry` = 32886;
UPDATE `creature_template` SET `modelid1` = 16925, `modelid2` = 0 WHERE `entry`IN (33378, 32892);

-- Thorim Mini bosses
UPDATE `creature_template` SET `mechanic_immune_mask` = 650854239, `flags_extra` = 1, `ScriptName` = 'npc_runic_colossus' WHERE `entry` = 32872;
UPDATE `creature_template` SET `ScriptName`='npc_runic_smash' WHERE `entry`=33140;
UPDATE `creature_template` SET `mechanic_immune_mask` = 650854239, `flags_extra` = 1, `ScriptName` = 'npc_ancient_rune_giant' WHERE `entry` = 32873;
UPDATE `creature_template` SET `mechanic_immune_mask` = 650854239, `flags_extra` = 1, `ScriptName` = 'npc_sif' WHERE `entry` = 33196;
UPDATE `creature_template` SET `ScriptName` = 'npc_thorim_arena_phase' WHERE `entry` IN (32876, 32904, 32878, 32877, 32874, 32875, 33110);
DELETE FROM `creature_addon` WHERE `guid`IN (136059, 136816);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `auras`) VALUES
('136059','0','0','0','1','0','40775 0'),
('136816','0','0','0','1','0','40775 0');

/*DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId`=13 AND `SourceEntry` IN (62942,62466,62976,64098);
INSERT INTO `conditions` (`SourceTypeOrReferenceId`,`SourceEntry`,`ConditionTypeOrReference`,`ConditionValue1`,`ConditionValue2`) VALUES
(13, 62942, 18, 1, 33110),
(13, 62942, 18, 1, 32874),
(13, 62942, 18, 1, 32872),
(13, 62942, 18, 1, 32875),
(13, 62466, 18, 1, 32780),
(13, 64098, 18, 1, 32865),
(13, 62976, 18, 1, 34055);*/

UPDATE `creature_template` SET `faction_A`=35, `faction_H`=35 WHERE `entry`=34055;

-- thorim - lightning orb (temporary)
UPDATE `creature_template` SET `speed_run`=9.6, `dmg_multiplier`=200, `baseattacktime`=1000, `Health_mod`=100 WHERE `entry`=33138;

DELETE FROM `spell_script_names` WHERE `spell_id`=62042;
INSERT INTO `spell_script_names` (`spell_id`,`ScriptName`) VALUES
(62042, 'spell_stormhammer_targeting');

UPDATE `creature_template` SET `dmg_multiplier`=20 WHERE `entry`=32865;
UPDATE `creature_template` SET `dmg_multiplier`=40 WHERE `entry`=33147;
UPDATE `creature` SET `position_z`=440.331 WHERE `id`=32865;
DELETE FROM `creature_addon` WHERE `guid` NOT IN (SELECT `guid` FROM `creature`);
UPDATE `creature` SET `MovementType`=0 WHERE `guid`=10201240;
UPDATE `creature` SET `MovementType`=0 WHERE `guid`=10201241;
UPDATE `creature_addon` SET `auras`='40775' WHERE `guid`=136816;
UPDATE `creature_addon` SET `auras`='40775' WHERE `guid`=136059;
DELETE FROM `achievement_criteria_data` WHERE `criteria_id` IN (10304,10313) AND `type` IN (11,18);
INSERT INTO `achievement_criteria_data` (`criteria_id`,`type`,`value1`,`value2`,`ScriptName`)
VALUES
(10304,11,0,0, 'achievement_who_needs_bloodlust'),
(10313,11,0,0, 'achievement_who_needs_bloodlust');